<header class="page-header">
  <h1>Gestionar Secciones</h1>
</header>

<div class="sections-layout">
  <!-- COLUMNA IZQUIERDA: FORMULARIO -->
  <div class="form-column">
    <div class="card glass-panel sticky-card">
      <h2 class="card-title">Nueva Sección</h2>

      <form [formGroup]="sectionForm" (ngSubmit)="handleSubmit()">
        <p class="form-description">
          Las secciones organizan tu catálogo principal (ej: "Mascotas",
          "Hogar", "Regalos").
        </p>

        <div class="material-field">
          <input
            id="name"
            type="text"
            formControlName="name"
            class="material-input"
            placeholder=" "
          />
          <label for="name" class="material-label">Nombre de la Sección</label>
        </div>

        <div class="form-actions">
          <button
            type="submit"
            [disabled]="sectionForm.invalid || isSaving()"
            class="btn-material full-width"
            appRipple
          >
            {{ isSaving() ? "Guardando..." : "Crear Sección" }}
          </button>
        </div>
      </form>
    </div>
  </div>

  <!-- COLUMNA DERECHA: LISTA -->
  <div class="list-column">
    <div class="card glass-panel">
      <h2 class="card-title">Secciones Existentes ({{ sections().length }})</h2>

      @if (isLoading()) {
        <div class="loading-state">
          <div class="spinner"></div>
          <p>Cargando secciones...</p>
        </div>
      } @else {
        <div class="sections-grid">
          @for (section of sections(); track section._id) {
            <div class="section-card">
              <div class="icon-wrapper">
                <span class="material-symbols-outlined">folder_open</span>
              </div>
              <span class="section-name">{{ section.name }}</span>
              <button
                (click)="deleteSection(section)"
                class="delete-btn"
                title="Eliminar Sección"
                appRipple
              >
                <span class="material-symbols-outlined">delete</span>
              </button>
            </div>
          } @empty {
            <div class="empty-state">
              <span class="material-symbols-outlined icon">folder_off</span>
              <p>Aún no has creado ninguna sección.</p>
            </div>
          }
        </div>
      }
    </div>
  </div>
</div>
