<!-- Contenido completo para: src/app/pages/admin/category-form/category-form.component.html -->

<header class="page-header">
  <h1>{{ isEditMode() ? "Editar Categoría" : "Crear Nueva Categoría" }}</h1>
</header>

<form
  [formGroup]="categoryForm"
  (ngSubmit)="handleSubmit()"
  class="form-container"
>
  <!-- Columna Principal -->
  <div class="main-column">
    <div class="card">
      <h2 class="card-title">Detalles de la Categoría</h2>
      <div class="form-field">
        <label for="name">Nombre de la categoría</label>
        <input
          id="name"
          type="text"
          formControlName="name"
          class="form-input"
        />
      </div>
    </div>
  </div>

  <!-- Columna Lateral -->
  <div class="sidebar-column">
    <div class="card">
      <h2 class="card-title">Imagen de la Categoría</h2>
      <div class="image-upload-area">
        <!-- Vista previa de la imagen -->
        @if (imagePreview()) {
        <img
          [src]="imagePreview()"
          alt="Vista previa de la categoría"
          class="image-preview"
        />
        } @else {
        <div class="image-placeholder">
          <span class="material-symbols-outlined">image</span>
        </div>
        }
        <!-- Botón que activa el input de archivo -->
        <label for="image-upload" class="upload-button" appRipple>
          {{ imagePreview() ? "Cambiar Imagen" : "Seleccionar Imagen" }}
        </label>
        <!-- Input de archivo real, pero oculto -->
        <input
          id="image-upload"
          type="file"
          (change)="onFileSelected($event)"
          accept="image/png, image/jpeg, image/webp"
        />
      </div>
    </div>
  </div>

  <!-- Acciones del Formulario -->
  <div class="form-actions">
    <a routerLink="/admin/categories" class="btn-secondary" appRipple
      >Cancelar</a
    >
    <button
      type="submit"
      [disabled]="categoryForm.invalid || isUploading()"
      class="btn-material"
      appRipple
    >
      {{
        isUploading()
          ? "Subiendo imagen..."
          : isEditMode()
          ? "Guardar Cambios"
          : "Guardar Categoría"
      }}
    </button>
  </div>
</form>
