<header class="page-header">
  <h1>{{ isEditMode ? 'Editar Producto' : 'Crear Nuevo Producto' }}</h1>
</header>

<form [formGroup]="productForm" (ngSubmit)="handleSubmit()" class="form-container">
  
  <!-- Columna Principal de Información -->
  <div class="main-column">
    <div class="card">
      <h2 class="card-title">Información Principal</h2>
      <div class="form-field">
        <label for="name">Nombre del producto</label>
        <input id="name" type="text" formControlName="name" class="form-input">
      </div>
      <div class="form-field">
        <label for="description">Descripción</label>
        <textarea id="description" formControlName="description" rows="6" class="form-input"></textarea>
      </div>
    </div>
    
    <!-- Aquí irá la gestión de variantes en el futuro -->

  </div>

  <!-- Columna Lateral de Organización y Precio -->
  <div class="sidebar-column">
    
    <!-- Tarjeta para la Imagen del Producto -->
    <div class="card">
      <h2 class="card-title">Imagen del Producto</h2>
      
      <!-- Vista previa de la imagen (se muestra si hay una URL en el formulario) -->
      @if (productForm.value.imageUrl) {
        <img [src]="productForm.value.imageUrl" alt="Vista previa" class="image-preview">
      }

      <!-- Opción 1: Subir un archivo -->
      <div class="form-field">
        <label for="image-upload" class="upload-button">
          {{ isUploading ? 'Subiendo...' : 'Seleccionar Archivo' }}
        </label>
        <input id="image-upload" type="file" (change)="onFileSelected($event)" accept="image/*">
      </div>

      <!-- Opción 2: Pegar una URL -->
      <div class="form-field">
        <label for="imageUrl">O pegar URL de la imagen</label>
        <input id="imageUrl" type="text" formControlName="imageUrl" class="form-input">
      </div>
    </div>
    
    <!-- Tarjeta para Precio y Categoría -->
    <div class="card">
      <h2 class="card-title">Organización</h2>
      <div class="form-field">
        <label for="price">Precio</label>
        <input id="price" type="number" formControlName="price" class="form-input">
      </div>
      <div class="form-field">
        <label for="category">Categoría</label>
        <input id="category" type="text" formControlName="category" class="form-input">
      </div>
    </div>
  </div>

  <!-- Acciones del Formulario al final -->
  <div class="form-actions">
    <a routerLink="/admin/products" class="cancel-button">Descartar</a>
    <button type="submit" [disabled]="productForm.invalid || isUploading" class="save-button" appRipple>
      <!-- Mostramos un texto diferente si se está subiendo la imagen -->
      {{ isUploading ? 'Subiendo imagen...' : (isEditMode ? 'Guardar Cambios' : 'Guardar Producto') }}
    </button>
  </div>
</form>