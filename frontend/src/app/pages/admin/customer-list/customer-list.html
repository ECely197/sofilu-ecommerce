<!-- Contenido completo para: src/app/pages/admin/customer-list/customer-list.html -->

<header class="page-header">
  <h1>Clientes Registrados</h1>
</header>

<div class="search-bar-wrapper">
  <div class="search-field">
    <span class="material-symbols-outlined">search</span>
    <input
      type="text"
      [formControl]="searchControl"
      placeholder="Buscar por nombre o descripción..."
      class="search-input"
    />
  </div>
</div>

<div class="table-container">
  <!-- Estado de Carga (Esqueleto) -->
  @if (isLoading()) {
  <div class="skeleton-list">
    @for (item of [1, 2, 3, 4]; track item) {
    <div class="skeleton-item">
      <div class="skeleton-text-group">
        <div class="skeleton-text"></div>
        <div class="skeleton-text short"></div>
      </div>
    </div>
    }
  </div>
  }

  <!-- Lista de Clientes -->
  @if (!isLoading() && customers().length > 0) {
  <div class="customer-list" [@listAnimation]="customers().length">
    <!-- Cabecera de la tabla (solo visible en desktop) -->
    <div class="customer-item header">
      <div class="cell">Email</div>
      <div class="cell">Nombre</div>
      <div class="cell">Fecha de Registro</div>
      <div class="cell">Acciones</div>
    </div>

    <!-- Filas de clientes -->
    @for (customer of customers(); track customer.uid) {
    <div class="customer-item">
      <div class="cell customer-email" data-label="Email">
        {{ customer.email }}
      </div>
      <div class="cell" data-label="Nombre">
        {{ customer.displayName || "No especificado" }}
      </div>
      <div class="cell" data-label="Fecha de Registro">
        {{ customer.creationTime | date : "medium" }}
      </div>
      <div class="cell" data-label="Acciones">
        <div class="action-buttons">
          <button (click)="viewDetails(customer)" class="action-button details">
            Detalles
          </button>
          <button
            (click)="toggleAdmin(customer)"
            class="action-button"
            [class.admin]="customer.isAdmin"
          >
            {{ customer.isAdmin ? "Quitar Admin" : "Hacer Admin" }}
          </button>
          <button
            (click)="toggleDisable(customer)"
            class="action-button"
            [class.danger]="!customer.disabled"
          >
            {{ customer.disabled ? "Habilitar" : "Deshabilitar" }}
          </button>
        </div>
      </div>
    </div>
    }
  </div>
  }

  <!-- Estado Vacío -->
  @if (!isLoading() && customers().length === 0) {
  <div class="empty-state">
    <p>Aún no tienes ningún cliente registrado.</p>
  </div>
  }
</div>
