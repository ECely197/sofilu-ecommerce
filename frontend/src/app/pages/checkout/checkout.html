<div class="checkout-layout">
  <!-- Columna de Formularios a la Izquierda -->
  <div class="form-column">
    <div class="logo-header">
      <a routerLink="/" class="logo-link">
        <span class="logo-text">Sofilu</span>
      </a>
    </div>

    <form [formGroup]="checkoutForm" (ngSubmit)="handlePayment()" novalidate class="checkout-form">
      
      <div class="form-section" formGroupName="contactInfo">
        <h2 class="section-title">Información de Contacto</h2>
        <div class="form-field">
          <label for="email">Correo Electrónico</label>
          <input id="email" type="email" class="form-input" formControlName="email">
        </div>
      </div>

      <div class="form-section" formGroupName="shippingAddress">
        <h2 class="section-title">Dirección de Envío</h2>
        <div class="form-field">
          <label for="name">Nombre y Apellido</label>
          <input id="name" type="text" class="form-input" formControlName="name">
        </div>
        <div class="form-field">
          <label for="address">Dirección Completa</label>
          <input id="address" type="text" class="form-input" formControlName="address">
        </div>
        <div class="form-grid">
          <div class="form-field">
            <label for="city">Ciudad</label>
            <input id="city" type="text" class="form-input" formControlName="city">
          </div>
          <div class="form-field">
            <label for="postalCode">Código Postal</label>
            <input id="postalCode" type="text" class="form-input" formControlName="postalCode">
          </div>
        </div>
         <div class="form-field">
            <label for="phone">Teléfono</label>
            <input id="phone" type="tel" class="form-input" formControlName="phone">
          </div>
      </div>
      
      <div class="form-actions">
         <button type="submit" [disabled]="checkoutForm.invalid" class="pay-button" appRipple>Pagar Ahora</button>
      </div>
    </form>
  </div>

  <!-- Columna de Resumen del Pedido a la Derecha -->
  <aside class="summary-column">
    <div class="summary-card">
      <h2 class="summary-title">Tu Pedido</h2>
      
      <div class="summary-items">
        @for (item of cartService.cartItems(); track item.product._id) {
          <div class="summary-item">
            <div class="item-image" [style.backgroundImage]="'url(' + item.product.imageUrl + ')'">
              <span class="item-quantity">{{ item.quantity }}</span>
            </div>
            <p class="item-name">{{ item.product.name }}</p>
            <p class="item-price">{{ (item.product.price * item.quantity) | currency:'COP':'symbol':'1.0-0' }}</p>
          </div>
        }
      </div>

      <hr>

      <div class="summary-details">
        <div class="summary-row">
          <span>Subtotal</span>
          <span>{{ cartService.subTotal() | currency:'COP':'symbol':'1.0-0' }}</span>
        </div>
        <div class="summary-row">
          <span>Envío</span>
          <span>$10,000</span>
        </div>
        <hr>
        <div class="summary-row total">
          <span>Total</span>
          <span>{{ (cartService.subTotal() + 10000) | currency:'COP':'symbol':'1.0-0' }}</span>
        </div>
      </div>
    </div>
  </aside>
</div>