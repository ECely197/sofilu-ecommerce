<div class="page-container">
  <header class="page-header">
    @if (searchTerm()) {
    <h1>Resultados para "{{ searchTerm() }}"</h1>
    } @else {
    <h1>Explorar todo</h1>
    }
  </header>

  <!-- Barra de Filtros -->
  <div class="filters-container">
    <div class="filter-buttons">
      <!-- Botones visuales (funcionalidad futura) -->
      <button class="filter-btn" appRipple>
        <span>Categoría</span>
        <span class="material-symbols-outlined">expand_more</span>
      </button>
      <button class="filter-btn" appRipple>
        <span>Precio</span>
        <span class="material-symbols-outlined">expand_more</span>
      </button>
    </div>

    <div class="sort-selector">
      <label for="sort">Ordenar:</label>
      <select
        id="sort"
        class="sort-input"
        (change)="applySort($event)"
        [value]="
          (activeFilters()['sortBy'] || 'relevance') +
          ',' +
          (activeFilters()['sortOrder'] || 'desc')
        "
      >
        <option value="relevance,desc">Relevancia</option>
        <option value="price,asc">Precio: Bajo a Alto</option>
        <option value="price,desc">Precio: Alto a Bajo</option>
        <option value="name,asc">Nombre: A-Z</option>
        <option value="name,desc">Nombre: Z-A</option>
      </select>
    </div>
  </div>

  <!-- Resultados -->
  @if (isLoading()) {
  <div class="loading-text">
    <p>Buscando tesoros...</p>
  </div>
  } @else if (products().length > 0) {
  <div class="products-grid">
    @for (product of products(); track product._id) {
    <app-product-card [product]="product"></app-product-card>
    }
  </div>
  } @else {
  <div class="empty-state">
    <!-- Si tienes el gato del carrito, úsalo aquí también -->
    <img src="assets/images/cat-sad.png" alt="No encontrado" style="width: 150px; margin-bottom: 1rem; opacity: 0.7;">
    <h2>Ups, no encontramos nada</h2>
    <p>
      No hemos encontrado productos para "{{ searchTerm() }}". <br> Intenta buscar "oso", "gato" o navega por categorías.
    </p>
    <a routerLink="/" class="btn-material" appRipple>Volver al inicio</a>
  </div>
  }
</div>