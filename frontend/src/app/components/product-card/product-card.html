<!-- En: src/app/components/product-card/product-card.html -->

<a [routerLink]="['/product', product._id]" class="card-link">
  <!-- El .card es el contenedor principal que ya tienes -->
  <div *ngIf="product" class="card">
    <!-- El contenedor de la imagen -->
    <div class="image-container">
      @if (product.images && product.images.length > 0) {
      <img [src]="product.images[0]" [alt]="product.name" />
      } @else {
      <div class="image-placeholder"></div>
      }
    </div>

    <!-- Contenido de la tarjeta -->
    <div class="card-content">
      <h3>{{ product.name }}</h3>
      <p class="price">
        {{ product.price | currency : "COP" : "symbol" : "1.0-0" }}
      </p>
    </div>

    <!-- ¡NUEVO! AÑADIMOS LAS BURBUJAS DE ACCIÓN AQUÍ -->
    @if (authService.currentUser$ | async) {
    <div class="action-bubbles">
      <button
        (click)="toggleWishlist($event)"
        class="bubble-button"
        [class.active]="isProductInWishlist()"
      >
        <span class="material-symbols-outlined">
          {{ isProductInWishlist() ? "favorite" : "favorite_border" }}
        </span>
      </button>
      <button (click)="addToCart($event)" class="bubble-button">
        <span class="material-symbols-outlined">add_shopping_cart</span>
      </button>
    </div>
    }
  </div>
</a>
