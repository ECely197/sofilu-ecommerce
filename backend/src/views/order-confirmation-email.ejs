<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Confirmación de Pedido - Sofilu</title>
    <style>
      body {
        font-family: "Manrope", Arial, sans-serif;
      }
    </style>
  </head>
  <body
    style="
      margin: 0;
      padding: 0;
      background-color: #faf3e9;
      font-family: 'Manrope', Arial, sans-serif;
    "
  >
    <table
      width="100%"
      border="0"
      cellspacing="0"
      cellpadding="0"
      style="background-color: #faf3e9"
    >
      <tr>
        <td align="center">
          <table
            width="600"
            border="0"
            cellspacing="0"
            cellpadding="0"
            style="max-width: 600px; width: 100%"
          >
            <!-- HEADER CON LOGO -->
            <tr>
              <td align="center" style="padding: 24px 0">
                <h1
                  style="
                    font-family: 'Playfair Display', serif;
                    font-size: 24px;
                    color: #1a100e;
                    margin: 0;
                  "
                >
                  Sofilu
                </h1>
              </td>
            </tr>
            <!-- CUERPO PRINCIPAL -->
            <tr>
              <td
                align="center"
                style="
                  background-color: #ffffff;
                  border-radius: 16px;
                  padding: 32px;
                "
              >
                <table width="100%" border="0" cellspacing="0" cellpadding="0">
                  <!-- MENSAJE DE BIENVENIDA -->
                  <tr>
                    <td align="center">
                      <h1
                        style="
                          font-family: 'Playfair Display', serif;
                          font-size: 28px;
                          color: #1a100e;
                          margin: 0 0 16px 0;
                        "
                      >
                        ¡Gracias por tu pedido, <%= order.customerInfo.name %>!
                      </h1>
                      <p
                        style="
                          color: #945b51;
                          margin: 0 0 32px 0;
                          line-height: 1.5;
                        "
                      >
                        Hemos recibido tu pedido y lo estamos procesando.
                        Recibirás una notificación cuando tus productos estén en
                        camino.
                      </p>
                    </td>
                  </tr>
                  <!-- TABLA DE PRODUCTOS -->
                  <tr>
                    <td>
                      <table
                        width="100%"
                        border="0"
                        cellspacing="0"
                        cellpadding="0"
                        style="
                          border: 1px solid #e6d4d1;
                          border-radius: 12px;
                          overflow: hidden;
                        "
                      >
                        <thead>
                          <tr style="background-color: #f8ead8">
                            <th
                              colspan="2"
                              style="
                                padding: 16px;
                                text-align: left;
                                font-weight: 500;
                                color: #945b51;
                                font-size: 14px;
                              "
                            >
                              Producto
                            </th>
                            <th
                              style="
                                padding: 16px;
                                text-align: center;
                                font-weight: 500;
                                color: #945b51;
                                font-size: 14px;
                              "
                            >
                              Cantidad
                            </th>
                            <th
                              style="
                                padding: 16px;
                                text-align: right;
                                font-weight: 500;
                                color: #945b51;
                                font-size: 14px;
                              "
                            >
                              Precio
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <% order.items.forEach(item => { %>
                          <tr style="border-top: 1px solid #e6d4d1">
                            <td style="padding: 16px; width: 80px">
                              <img
                                src="<%= item.product.images[0] %>"
                                alt="<%= item.product.name %>"
                                width="64"
                                height="64"
                                style="border-radius: 8px; object-fit: cover"
                              />
                            </td>
                            <td style="padding: 16px">
                              <p
                                style="
                                  margin: 0;
                                  font-weight: 600;
                                  color: #1a100e;
                                "
                              >
                                <%= item.product.name %>
                              </p>
                              <!-- Lógica para mostrar variantes -->
                              <p
                                style="
                                  margin: 4px 0 0 0;
                                  font-size: 12px;
                                  color: #945b51;
                                "
                              >
                                <% for (const [key, value] of
                                Object.entries(item.selectedVariants || {})) {
                                %>
                                <span
                                  ><%= key %>:
                                  <strong><%= value %></strong></span
                                >
                                <% } %>
                              </p>
                            </td>
                            <td
                              style="
                                padding: 16px;
                                text-align: center;
                                color: #945b51;
                              "
                            >
                              <%= item.quantity %>
                            </td>
                            <td
                              style="
                                padding: 16px;
                                text-align: right;
                                color: #945b51;
                              "
                            >
                              $<%= item.price.toLocaleString('es-CO') %>
                            </td>
                          </tr>
                          <% }) %>
                        </tbody>
                      </table>
                      <!-- TABLA DE TOTALES -->
                      <table
                        width="100%"
                        border="0"
                        cellspacing="0"
                        cellpadding="0"
                        style="
                          background-color: #f8ead8;
                          padding: 16px;
                          border-top: 1px solid #e6d4d1;
                        "
                      >
                        <tr>
                          <td style="padding-bottom: 8px; color: #945b51">
                            Subtotal
                          </td>
                          <td
                            style="
                              padding-bottom: 8px;
                              text-align: right;
                              color: #1a100e;
                            "
                          >
                            $<%= (order.totalAmount -
                            10000).toLocaleString('es-CO') %>
                          </td>
                        </tr>
                        <tr>
                          <td style="padding-bottom: 16px; color: #945b51">
                            Envío
                          </td>
                          <td
                            style="
                              padding-bottom: 16px;
                              text-align: right;
                              color: #1a100e;
                            "
                          >
                            $10,000
                          </td>
                        </tr>
                        <tr style="border-top: 1px solid #e6d4d1">
                          <td
                            style="
                              padding-top: 16px;
                              font-weight: bold;
                              font-size: 16px;
                              color: #945b51;
                            "
                          >
                            Total
                          </td>
                          <td
                            style="
                              padding-top: 16px;
                              text-align: right;
                              font-weight: bold;
                              font-size: 16px;
                              color: #1a100e;
                            "
                          >
                            $<%= order.totalAmount.toLocaleString('es-CO') %>
                          </td>
                        </tr>
                      </table>
                    </td>
                  </tr>
                  <!-- BOTÓN DE ACCIÓN (OPCIONAL) -->
                  <tr>
                    <td align="center" style="padding-top: 40px">
                      <a
                        href="https://sofilu-ecommerce.vercel.app/account/orders"
                        target="_blank"
                        style="
                          display: inline-block;
                          background-color: #f4c2c2;
                          color: #1a100e;
                          font-weight: bold;
                          padding: 12px 32px;
                          border-radius: 8px;
                          text-decoration: none;
                        "
                      >
                        Ver mi pedido
                      </a>
                    </td>
                  </tr>
                </table>
              </td>
            </tr>
            <!-- FOOTER -->
            <tr>
              <td align="center" style="padding: 32px 16px">
                <p style="font-size: 12px; color: #945b51; margin: 0">
                  Sofilu Inc., Calle Falsa 123, Bogotá, Colombia
                </p>
              </td>
            </tr>
          </table>
        </td>
      </tr>
    </table>
  </body>
</html>
